import{j as C,r as x,R as T,a as E}from"./vendor.ced653b1.js";const j=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))f(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function v(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(n){if(n.ep)return;n.ep=!0;const a=v(n);fetch(n.href,a)}};j();function S(e){return e<0?e*-1:e}const t=C.exports.jsx,o=C.exports.jsxs,A=e=>t("div",{className:"atom-core",style:{top:`${e.y}%`,left:`${e.x}%`},children:t("div",{className:"atom-shell"})}),F=e=>t("div",{className:`particle ${e.activated?"particle-activated":""}`,style:{left:`${e.x}%`,top:`${e.y}%`}}),g=2,R=2e4,h=[];for(let e=2;e<9;e++)e%2==0?h.push({x:50,y:e*10}):(h.push({x:40,y:e*10}),h.push({x:60,y:e*10}));const s={spawnChance:.05,maxParticles:100,autoSpawn:!0,paused:!0,mode:"rutherford"};let _=0;const $=()=>{const[e,d]=x.exports.useState([]),[v,f]=x.exports.useState("NaN"),n=x.exports.useCallback((i,u)=>{if(s.paused)return d([...e]);const p=window.performance.now()-i;u%6==0&&f(`${Math.round(p)}ms, ${Math.round(1e3/p)} FPS, ${e.length} particles`),Math.random()>1-s.spawnChance&&e.length<s.maxParticles&&s.autoSpawn&&e.push({x:0,y:Math.random()*75+12.5,vx:Math.random()*2.75+.25,vy:Math.random()>.5?Math.random()*2-1:0,activated:!1,lifetime:0}),d(e.map(r=>{if(r.lifetime+=p,r.x+=r.vx*.01*p,r.y+=r.vy*.01*p,s.mode=="rutherford"){const L=h.map(l=>({dist:Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2)),atom:l}));let w=!1;for(const l of L)if(l.dist<g){w=!0;const b=-(r.x-l.atom.x),M=-(r.y-l.atom.y);let m=g-S(b),y=g-S(M);const k=(m+y)/g,P=m/(m+y),N=y/(m+y);r.vx-=P*k*.2*(b<0?-1:1),r.vy-=N*k*.2*(M<0?-1:1)}r.activated=w}return r}).filter(r=>r.x>0&&r.x<99&&r.y>0&&r.y<99&&r.lifetime<R))},[e]),a=window.performance.now();return x.exports.useEffect(()=>{requestAnimationFrame(()=>n(a,_+1)),_++},[e]),o("div",{style:{width:"100%",height:"75%"},children:[t("span",{style:{position:"fixed",left:"5px",top:"5px"},children:v}),h.map((i,u)=>t(A,{x:i.x,y:i.y},u)),e.map((i,u)=>t(F,{x:i.x,y:i.y,activated:i.activated},u))]})},c={textAlign:"right"},I=()=>o("div",{style:{position:"absolute",right:"5px",top:"5px",zIndex:100},children:[o("div",{style:c,children:[t("span",{children:"Simulation Type"}),o("select",{style:{width:"128px",marginLeft:"8px"},onChange:e=>{s.mode=e.currentTarget.value},defaultValue:"rutherford",children:[t("option",{value:"pudding",children:"Plum Pudding"}),t("option",{value:"rutherford",children:"Rutherford"})]})]}),o("div",{style:c,children:[t("span",{children:"Dark Theme"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{e.currentTarget.checked?document.body.className="dark":document.body.className="light"},defaultChecked:!0})]}),o("div",{style:c,children:[t("span",{children:"Paused"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{s.paused=e.currentTarget.checked},defaultChecked:!0})]}),o("div",{style:c,children:[t("span",{children:"Enable Spawning"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{s.autoSpawn=e.currentTarget.checked},defaultChecked:!0})]}),o("div",{style:c,children:[t("span",{children:"Spawn Chance (0-1)"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"number",onChange:e=>{s.spawnChance=parseFloat(e.currentTarget.value)},defaultValue:.05,step:.05,min:0,max:1})]}),o("div",{style:c,children:[t("span",{children:"Max Particles"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"number",onChange:e=>{s.maxParticles=parseFloat(e.currentTarget.value)},defaultValue:100,step:10,min:0,max:1e3})]})]}),O=e=>t("div",{className:"footer",children:e.children});function D(){return o("div",{children:[t(I,{}),t($,{}),o(O,{children:[t("a",{href:"https://en.wikipedia.org/wiki/Rutherford_model",target:"_blank",children:"Rutherford Model"})," \u2022 ",t("a",{href:"https://github.com/janderedev/rutherford_simulation/blob/master/LICENSE",target:"_blank",children:"AGPLv3"})," \u2022 ",t("a",{href:"https://github.com/janderedev/rutherford_simulation",target:"_blank",children:"GitHub"})]})]})}T.render(t(E.StrictMode,{children:t(D,{})}),document.getElementById("root"));
