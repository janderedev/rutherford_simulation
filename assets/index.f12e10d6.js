import{j as S,r as g,R as F,a as $}from"./vendor.ced653b1.js";const O=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function d(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=d(i);fetch(i.href,a)}};O();function A(e){return e<0?e*-1:e}const t=S.exports.jsx,l=S.exports.jsxs,j=S.exports.Fragment,D=e=>t("div",{className:"atom-core",style:{top:`${e.y}%`,left:`${e.x}%`},children:t("div",{className:"atom-shell"})}),V=e=>t("div",{className:`particle ${e.activated?"particle-activated":""}`,style:{left:`${e.x}%`,top:`${e.y}%`}}),T=2,H=2e4,q=500,k=5e3,y=10,E={r:150,g:150,b:150},w=[];for(let e=2;e<9;e++)e%2==0?w.push({x:50,y:e*10}):(w.push({x:40,y:e*10}),w.push({x:60,y:e*10}));const r={spawnChance:.05,maxParticles:100,spread:0,autoSpawn:!0,paused:!0,trails:!1,mode:"rutherford"},f=[];let N=0;const G=()=>{const[e,c]=g.exports.useState([]),[d,o]=g.exports.useState("NaN"),i=g.exports.useCallback((s,u)=>{if(r.paused)return c([...e]);const m=window.performance.now()-s;u%6==0&&o(`${Math.round(m)}ms, ${Math.round(1e3/m)} FPS, ${e.length} particles`);let b=r.spawnChance;for(;(Math.random()>1-b||b>1)&&e.length<r.maxParticles&&r.autoSpawn;)e.push({x:0,y:Math.random()*75+12.5,vx:Math.random()*2.75+.25,vy:Math.random()*r.spread*2-r.spread,activated:!1,lifetime:0,trail:[]}),b>1&&b--;if(c(e.map(n=>{if(n.lifetime+=m,n.x+=n.vx*.01*m,n.y+=n.vy*.01*m,r.trails?(n.trail.push({x:n.x,y:n.y}),n.trail.length>q&&n.trail.shift()):n.trail.length>0&&(n.trail.length=0),r.mode=="rutherford"){const x=w.map(h=>({dist:Math.sqrt(Math.pow(h.x-n.x,2)+Math.pow(h.y-n.y,2)),atom:h}));let v=!1;for(const h of x)if(h.dist<T){v=!0;const _=-(n.x-h.atom.x),M=-(n.y-h.atom.y);let C=T-A(_),L=T-A(M);const P=(C+L)/T,R=C/(C+L),I=L/(C+L);n.vx-=R*P*.2*(_<0?-1:1),n.vy-=I*P*.2*(M<0?-1:1)}n.activated=v}return n}).filter(n=>n.x>-1&&n.x<101&&n.y>-1&&n.y<101&&n.lifetime<H?!0:(f.push({trail:n.trail,lifetime:k}),!1))),r.trails){const n=[];for(const x in f){const v=f[x];v.lifetime-=m,v.lifetime<0&&n.unshift(parseInt(x))}n.forEach(x=>f.splice(x,1))}else f.length>0&&(f.length=0)},[e]),a=window.performance.now();return g.exports.useEffect(()=>{requestAnimationFrame(()=>i(a,N+1)),N++},[e]),l("div",{style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},children:[t("span",{style:{position:"fixed",left:"5px",top:"5px"},children:d}),r.trails?t(X,{trails:[...e.map(s=>({points:s.trail,color:E})),...f.map(s=>({points:s.trail,color:E,lifetime:s.lifetime}))]}):t(j,{}),w.map((s,u)=>t(D,{x:s.x,y:s.y},u)),e.map((s,u)=>t(V,{x:s.x,y:s.y,activated:s.activated},u))]})},X=e=>{const c=g.exports.useRef(null);return g.exports.useEffect(()=>{var i;const d=c.current;if(!d)return console.warn("Canvas was null");const o=d.getContext("2d");if(!o)return console.warn("Context was null");o.clearRect(0,0,d.width,d.height);for(const a of e.trails){if(a.points.length==0)continue;const s=(i=a.lifetime)!=null?i:k;o.beginPath(),o.strokeStyle=`rgba(${a.color.r}, ${a.color.b}, ${a.color.g}, ${1/k*s})`,o.moveTo(a.points[0].x*y,a.points[0].y*y);for(const u of a.points.slice(1))o.lineTo(u.x*y,u.y*y);o.stroke(),o.closePath()}},[e]),t("div",{style:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"auto",height:"auto",overflow:"hidden"},children:t("canvas",{ref:c,width:100*y,height:100*y,style:{width:"100%",height:"100%"}})})},p={textAlign:"right"},z=()=>l("div",{style:{position:"absolute",right:"5px",top:"5px",zIndex:100},children:[l("div",{style:p,children:[t("span",{children:"Simulation Type"}),l("select",{style:{width:"128px",marginLeft:"8px"},onChange:e=>{r.mode=e.currentTarget.value},defaultValue:r.mode,children:[t("option",{value:"pudding",children:"Plum Pudding"}),t("option",{value:"rutherford",children:"Rutherford"})]})]}),l("div",{style:p,children:[t("span",{children:"Dark Theme"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{e.currentTarget.checked?document.body.className="dark":document.body.className="light"},defaultChecked:document.body.className=="dark"})]}),l("div",{style:p,children:[t("span",{children:"Paused"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{r.paused=e.currentTarget.checked},defaultChecked:r.paused})]}),l("div",{style:p,children:[t("span",{children:"Enable Spawning"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{r.autoSpawn=e.currentTarget.checked},defaultChecked:r.autoSpawn})]}),l("div",{style:p,children:[t("span",{children:"Show Trails"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"checkbox",onChange:e=>{r.trails=e.currentTarget.checked},defaultChecked:r.trails})]}),l("div",{style:p,children:[t("span",{children:"Spawn Chance (0-1)"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"number",onChange:e=>{r.spawnChance=parseFloat(e.currentTarget.value)},defaultValue:r.spawnChance,step:.05,min:0,max:1})]}),l("div",{style:p,children:[t("span",{children:"Max Particles"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"number",onChange:e=>{r.maxParticles=parseFloat(e.currentTarget.value)},defaultValue:r.maxParticles,step:10,min:0,max:1e3})]}),l("div",{style:p,children:[t("span",{children:"Spread"}),t("input",{style:{width:"64px",marginLeft:"8px"},type:"number",onChange:e=>{r.spread=parseFloat(e.currentTarget.value)},defaultValue:r.spread,step:.25,min:0,max:5})]})]}),B=e=>t("div",{className:"footer",children:e.children});function K(){return l("div",{children:[t(z,{}),t(G,{}),l(B,{children:[t("a",{href:"https://en.wikipedia.org/wiki/Rutherford_model",target:"_blank",children:"Rutherford Model"})," \u2022 ",t("a",{href:"https://github.com/janderedev/rutherford_simulation/blob/master/LICENSE",target:"_blank",children:"AGPLv3"})," \u2022 ",t("a",{href:"https://github.com/janderedev/rutherford_simulation",target:"_blank",children:"GitHub"})]})]})}F.render(t($.StrictMode,{children:t(K,{})}),document.getElementById("root"));
